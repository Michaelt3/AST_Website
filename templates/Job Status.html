
<!DOCTYPE html>
  <head>
    <meta charset="utf-8">
    <title>AST Frac</title>
    <style>
      #map {
        height:500px;
        width: 100%;
      }
    </style>
    <link href='http://fonts.googleapis.com/css?family=Lato&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/static/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
  </head>
  <body>
      
      <div class="Container">
        <div class="nav-wrapper">
          <div class="left-side">
            Sign In
          </div>
          <div class="middle-side">
            <div class="nav-link-wrapper">
              <a href="index.html">Home</a>
            </div>
            <div class="nav-link-wrapper active-nav-link">
              <a href="Job Status.html">Job Status</a>
            </div>
            <div class="nav-link-wrapper">
              <a href="Operations.html">Operations</a>
            </div>
            <div class="nav-link-wrapper">
              <a href="Engineering.html">Engineering</a>
            </div>
            <div class="nav-link-wrapper">
              <a href="Electronics.html">Electronics</a>
            </div>
            <div class="nav-link-wrapper">
              <a href="Maintenance.html">Maintenance</a>
            </div>
            <div class="nav-link-wrapper">
              <a href="Accounting.html">Accounting</a>
            </div>
          </div>
          <div class="right-side">
            <div class="nav-contact" id="nav-button">
              Contact Us
            </div>

          </div>
        </div>
        
        <div class="background-wrapper">

          <div class="map-header"><h2>Current Frac Locations</h2>
          </div>

          <div id = "map"></div>



            <script>
              function initMap() {
                var location = {lat: 32.0373, lng: -101.9824};
                var map = new google.maps.Map(document.getElementById("map"), {
                    zoom: 8,
                    center: location
                });
                var marker = new google.maps.Marker({
                  position: location,
                  map: map
                });
              }
            </script>
            <script async defer src="">
            type="text/javascript"></script>
          <br>

          <div class="fleet-headers">
            <div class="fleet1-header">
              <h2>Fleet 1 Overview</h2>
            </div>
            <div class="fleet2-header">
              <h2>Fleet 2 Overview</h2>
            </div>
          </div>
          <div class="fleets-graphs">
            <div class="fleet1-graphs">
              <div class="fleet1-status">
                <canvas id="status1" width="200" height="200"></canvas>
                <script>
                  Chart.defaults.global.legend.display=false;
                  const ctx = document.getElementById("status1").getContext('2d');
                  var status1graph = new Chart(ctx, {
                    type: 'bar',
                      data: {
                        labels: ['Inventory Type'],
                        datasets: [{
                          label: 'Current Sand',
                          yAxisID: 'A',
                          data: [200000],
                          stack: 'Sand',
                          backgroundColor: [
                            'rgba(255, 99, 132, 0.2)',
                              ],
                           borderColor: [
                            'rgba(255, 99, 132, 1)',
                              ],
                         borderWidth: 1,
                        }, {
                          label: 'Remaining Sand',
                          yAxisID: 'A',
                          data: [400000],
                          stack: 'Sand',
                          backgroundColor: [
                            'rgba(255, 105, 86, 0.2)'
                              ],
                           borderColor: [
                            'rgba(255, 105, 86, 1)',
                              ],
                         borderWidth: 1,
                        }, {
                          label: 'Current Slurry',
                          yAxisID: 'B',
                          data: [1200],
                          stack: 'Slurry',
                          backgroundColor: [
                            'rgba(54, 162, 235, 0.2)'
                              ],
                           borderColor: [
                            'rgba(54, 162, 235, 1)',
                              ],
                         borderWidth: 1,
                        }, {
                          label: 'Remaining Slurry',
                          yAxisID: 'B',
                          data: [2400],
                          stack: 'Slurry',
                          backgroundColor: [
                            'rgba(84, 205, 235, 0.2)'
                              ],
                           borderColor: [
                            'rgba(84, 205, 235, 1)',
                              ],
                         borderWidth: 1,
                        }, {
                          label: 'Current Acid',
                          yAxisID: 'C',
                          data: [180],
                          stack: 'Acid',
                          backgroundColor: [
                            'rgba(153, 102, 255, 0.2)'
                              ],
                           borderColor: [
                            'rgba(153, 102, 255, 1)',
                              ],
                         borderWidth: 1,
                        }, {
                          label: 'Remaining Acid',
                          yAxisID: 'C',
                          data: [95],
                          stack: 'Acid',
                          backgroundColor: [
                            'rgba(200, 102, 255, 0.2)'
                              ],
                           borderColor: [
                            'rgba(200, 102, 255, 1)',
                              ],
                         borderWidth: 1,
                        }]
                      },
                      options: {
                        scales: {
                          yAxes: [{
                            id: 'A',
                            scaleLabel: {
                              display: true,
                              labelString: 'Proppant (Tons)'},
                            type: 'linear',
                            position: 'left',
                          }, {
                            id: 'B',
                            scaleLabel: {
                              display: true,
                              labelString: 'Slurry (Bbls)'},
                            type: 'linear',
                            position: 'right',
                            ticks: {
                              max: 4000,
                              min: 0
                            }
                          }, {
                            id: 'C',
                            scaleLabel: {
                              display: true,
                              labelString: 'Acid (Bbls)'},
                            type: 'linear',
                            position: 'right',
                            ticks: {
                              max: 300,
                              min: 0
                            }
                          }]
                        }
                      }
                    });

                </script>
              </div>

              <div class="fleet1-stage">
                <div class="fleet1-header">
                  Projected End Date: 9/22/2020
                </div>
                <canvas id="stage1" width="200" height="200"></canvas>
                <script>
                  var ctx2 = document.getElementById('stage1').getContext('2d');
                  var stage1graph = new Chart(ctx2, {
                    type: 'doughnut',
                    data: {
                      labels: ['Current Stages', 'Remaining Stages'],
                      datasets: [{
                        label: 'Fleet 1 Stage Count',
                        data: [60, 9],
                        backgroundColor: [
                                  'rgba(255, 99, 132, 0.2)',
                              ],
                              borderColor: [
                                  'rgba(255, 99, 132, 1)',
                              ],
                        options: {
                          maintainAspectRatio: false,
                          responsive: true,
                        }
                      }]
                    }
                  });

                </script>
              </div>
            </div>

            <div class="fleet2-graphs">
              <div class="fleet2-status">
                <canvas id="status2" width="200" height="200"></canvas>
                <script>
                  var ctx3 = document.getElementById('status2').getContext('2d');
                  var status2graph = new Chart(ctx3, {
                    type: 'bar',
                      data: {
                        labels: ['Inventory Type'],
                        datasets: [{
                          label: 'Current Sand',
                          yAxisID: 'A',
                          data: [200000],
                          stack: 'Sand',
                          backgroundColor: [
                            'rgba(255, 99, 132, 0.2)',
                              ],
                           borderColor: [
                            'rgba(255, 99, 132, 1)',
                              ],
                         borderWidth: 1,
                        }, {
                          label: 'Remaining Sand',
                          yAxisID: 'A',
                          data: [400000],
                          stack: 'Sand',
                          backgroundColor: [
                            'rgba(255, 105, 86, 0.2)'
                              ],
                           borderColor: [
                            'rgba(255, 105, 86, 1)',
                              ],
                         borderWidth: 1,
                        }, {
                          label: 'Current Slurry',
                          yAxisID: 'B',
                          data: [1200],
                          stack: 'Slurry',
                          backgroundColor: [
                            'rgba(54, 162, 235, 0.2)'
                              ],
                           borderColor: [
                            'rgba(54, 162, 235, 1)',
                              ],
                         borderWidth: 1,
                        }, {
                          label: 'Remaining Slurry',
                          yAxisID: 'B',
                          data: [2400],
                          stack: 'Slurry',
                          backgroundColor: [
                            'rgba(84, 205, 235, 0.2)'
                              ],
                           borderColor: [
                            'rgba(84, 205, 235, 1)',
                              ],
                         borderWidth: 1,
                        }, {
                          label: 'Current Acid',
                          yAxisID: 'C',
                          data: [180],
                          stack: 'Acid',
                          backgroundColor: [
                            'rgba(153, 102, 255, 0.2)'
                              ],
                           borderColor: [
                            'rgba(153, 102, 255, 1)',
                              ],
                         borderWidth: 1,
                        }, {
                          label: 'Remaining Acid',
                          yAxisID: 'C',
                          data: [95],
                          stack: 'Acid',
                          backgroundColor: [
                            'rgba(200, 102, 255, 0.2)'
                              ],
                           borderColor: [
                            'rgba(200, 102, 255, 1)',
                              ],
                         borderWidth: 1,
                        }]
                      },
                      options: {
                        scales: {
                          yAxes: [{
                            id: 'A',
                            scaleLabel: {
                              display: true,
                              labelString: 'Proppant (Tons)'},
                            type: 'linear',
                            position: 'left',
                          }, {
                            id: 'B',
                            scaleLabel: {
                              display: true,
                              labelString: 'Slurry (Bbls)'},
                            type: 'linear',
                            position: 'right',
                            ticks: {
                              max: 4000,
                              min: 0
                            }
                          }, {
                            id: 'C',
                            scaleLabel: {
                              display: true,
                              labelString: 'Acid (Bbls)'},
                            type: 'linear',
                            position: 'right',
                            ticks: {
                              max: 300,
                              min: 0
                            }
                          }]
                        }
                      }
                    });
                  </script>
              </div>

              <div class="fleet2-stage">
                <div class="fleet2-header">
                  Projected End Date: 9/26/2020
                </div>
                <canvas id="stage2" width="200" height="200"></canvas>
                <script>
                  var ctx4 = document.getElementById('stage2').getContext('2d');
                  var stage2graph = new Chart(ctx4, {
                    type: 'doughnut',
                    data: {
                      labels: ['Current Stages', 'Remaining Stages'],
                      datasets: [{
                        label: 'Fleet 1 Stage Count',
                        data: [32, 37],
                        backgroundColor: [
                                  'rgba(255, 99, 132, 0.2)',
                              ],
                              borderColor: [
                                  'rgba(255, 99, 132, 1)',
                              ],
                        options: {
                          maintainAspectRatio: false,
                          responsive: true,
                        }
                      }]
                    }
                  });

                </script>
                <script>
                  const api_url='https://astapi.herokuapp.com/stages'
                  async function getjobdata() {
                    const response = await fetch(api_url);
                    const data = await response.json();
                    console.log(data)
                    status1graph.data.datasets[0].data=[data.fleet1_stage.sand_total];
                    status2graph.data.datasets[0].data=[data.fleet2_stage.sand_total];
                    status1graph.update();
                    status2graph.update();
                  }
                  getjobdata();
                </script>
              </div>
            </div>
          </div>
        </div>
        <div class="contact-modal">
          <div class="modal-content">
            <div class="close">+</div>
            <img src="/static/AST Logo Clear.png" alt="AST Logo"/>
            <form action="">
              <input type="text" placeholder="Name">
              <input type="text" placeholder="E-mail">
              <input type="text" placeholder="Concern/Issue">
              <div class="submit-button">
                <Button><a href="">Submit</a></Button>
              </div>
            </form>
          </div>
          <script src="/static/contact.js"></script>
        </div>

      </div>
      

  </body>
</html>
